<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · AMDGPU.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href><img src="assets/logo.png" alt="AMDGPU.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">AMDGPU.jl</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#The-ROCm-stack"><span>The ROCm stack</span></a></li><li><a class="tocitem" href="#The-Julia-AMDGPU-stack"><span>The Julia AMDGPU stack</span></a></li><li><a class="tocitem" href="#Requirements"><span>Requirements</span></a></li></ul></li><li><a class="tocitem" href="quickstart/">Quick Start</a></li><li><a class="tocitem" href="queues_signals/">Queues and Signals</a></li><li><a class="tocitem" href="kernel_deps/">Kernel Dependencies</a></li><li><a class="tocitem" href="globals/">Global Variables</a></li><li><a class="tocitem" href="exceptions/">Exceptions</a></li><li><a class="tocitem" href="printing/">Printing</a></li><li><a class="tocitem" href="memory/">Memory</a></li><li><span class="tocitem">Intrinsics</span><ul><li><a class="tocitem" href="execution_control/">Execution Control</a></li><li><a class="tocitem" href="wavefront_ops/">Wavefront Operations</a></li></ul></li><li><a class="tocitem" href="api/">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaGPU/AMDGPU.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Programming-AMD-GPUs-with-Julia"><a class="docs-heading-anchor" href="#Programming-AMD-GPUs-with-Julia">Programming AMD GPUs with Julia</a><a id="Programming-AMD-GPUs-with-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#Programming-AMD-GPUs-with-Julia" title="Permalink"></a></h1><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>This documentation assumes that you are familiar with the main concepts of GPU programming and mostly describes the specifics of running Julia code on AMD GPUs. For a much more gentle introduction to GPGPU with Julia consult the well-written <a href="https://juliagpu.gitlab.io/CUDA.jl">CUDA.jl documentation</a>.</p></div></div><h2 id="The-ROCm-stack"><a class="docs-heading-anchor" href="#The-ROCm-stack">The ROCm stack</a><a id="The-ROCm-stack-1"></a><a class="docs-heading-anchor-permalink" href="#The-ROCm-stack" title="Permalink"></a></h2><p>ROCm (short for Radeon Open Compute platforM) is AMD&#39;s open-source GPU computing platform, supported by most modern AMD GPUs (<a href="https://github.com/RadeonOpenCompute/ROCm#hardware-and-software-support">detailed hardware support</a>) and some AMD APUs. ROCm works solely on Linux and no plans to support either Windows or macOS have been announced by AMD.</p><p>A necessary prerequisite to use this Julia package is to have a working ROCm stack installed. A quick way to verify this is to check the output of <code>rocminfo</code>. For more information, consult the official <a href="https://rocmdocs.amd.com/en/latest/Installation_Guide/Installation-Guide.html">installation guide</a>. Even though the only platforms officially supported by AMD are certain versions of Ubuntu, CentOS, RHEL, and SLES <sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup>, there are options to install ROCm on other Linux distributions, including:</p><ul><li>Arch Linux - See the <a href="https://github.com/rocm-arch/rocm-arch">rocm-arch</a> repository or the slightly older PKGBUILDs in the AUR.</li><li>Gentoo - Check Portage for the <code>rocr-runtime</code> package and <a href="https://github.com/justxi/rocm">justxi&#39;s rocm repo</a> for unofficial ROCm package ebuilds.</li></ul><p>Even though you don&#39;t need HIP to use Julia on AMDGPU, it might be wise to make sure that you can build and run simple HIP programs to ensure that your ROCm installation works properly before trying to use it from Julia.</p><h2 id="The-Julia-AMDGPU-stack"><a class="docs-heading-anchor" href="#The-Julia-AMDGPU-stack">The Julia AMDGPU stack</a><a id="The-Julia-AMDGPU-stack-1"></a><a class="docs-heading-anchor-permalink" href="#The-Julia-AMDGPU-stack" title="Permalink"></a></h2><p>Julia support for programming AMD GPUs is currently provided by the <a href="https://github.com/jpsamaroo/AMDGPU.jl">AMDGPU.jl package</a>. This package contains everything necessary to program for AMD GPUs in Julia, including:</p><ul><li>An interface for working with the HSA runtime API, necessary for launching compiled kernels and controlling the GPU.</li><li>An interface for compiling and running kernels written in Julia through LLVM&#39;s AMDGPU backend.</li><li>An array type implementing the <a href="https://github.com/JuliaGPU/GPUArrays.jl">GPUArrays.jl</a> interface, providing high-level array operations.</li></ul><h2 id="Requirements"><a class="docs-heading-anchor" href="#Requirements">Requirements</a><a id="Requirements-1"></a><a class="docs-heading-anchor-permalink" href="#Requirements" title="Permalink"></a></h2><ul><li><a href="https://github.com/RadeonOpenCompute/ROCR-Runtime">ROCR</a></li><li><a href="https://github.com/RadeonOpenCompute/ROCT-Thunk-Interface">ROCT</a></li><li>Recent Linux kernel with AMDGPU and HSA enabled</li></ul><h3 id="Setup-Instructions"><a class="docs-heading-anchor" href="#Setup-Instructions">Setup Instructions</a><a id="Setup-Instructions-1"></a><a class="docs-heading-anchor-permalink" href="#Setup-Instructions" title="Permalink"></a></h3><p>Currently, the requirements to get everything working properly is a bit poorly documented in the upstream docs for any distro other than Ubuntu.  So here is a list of requirements I&#39;ve found through the process of making this work:</p><p>Make sure /dev/kfd has a group other than root that you can add your user to. I recommend adding your user to the &quot;video&quot; group, and setting the ownership of /dev/kfd to root:video with 660 permissions.</p><p>The correct libraries in your LD<em>LIBRARY</em>PATH or standard library locations:</p><ul><li>libhsa-runtime64.so</li><li>libhsakmt.so</li></ul><p>In terms of Linux kernel versions, just pick the newest one you can. If building your own kernel, make sure all the regular AMDGPU and HSA options are enabled.</p><p>You will also need <code>ld.lld</code> installed on your system (provided by LLVM/Clang); if you built Julia from source, you should have a copy somewhere in <code>deps/scratch/llvm-*/*/bin/</code> that you can add to your PATH.</p><p>Once all of this is setup properly, you should be able to <code>] build AMDGPU</code> successfully; after that, if you have a supported GPU attached and enabled, <code>] test AMDGPU</code> should work exactly as you might expect.</p><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a><a href="https://github.com/RadeonOpenCompute/ROCm/wiki#supported-operating-systems">https://github.com/RadeonOpenCompute/ROCm/wiki#supported-operating-systems</a></li></ul></section></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="quickstart/">Quick Start »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 26 January 2021 23:06">Tuesday 26 January 2021</span>. Using Julia version 1.6.0-beta1.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
