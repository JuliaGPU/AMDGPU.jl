<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · AMDGPU.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href><img src="assets/logo.png" alt="AMDGPU.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href>AMDGPU.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#The-Julia-AMDGPU-stack"><span>The Julia AMDGPU stack</span></a></li><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Required-Software"><span>Required Software</span></a></li></ul></li><li><a class="tocitem" href="quickstart/">Quick Start</a></li><li><a class="tocitem" href="devices/">Devices</a></li><li><a class="tocitem" href="streams/">Streams</a></li><li><a class="tocitem" href="kernel_launch/">Kernel Launch</a></li><li><a class="tocitem" href="exceptions/">Exceptions</a></li><li><a class="tocitem" href="profiling/">Profiling</a></li><li><a class="tocitem" href="memory/">Memory</a></li><li><a class="tocitem" href="hostcall/">Host-Call</a></li><li><span class="tocitem">Intrinsics</span><ul><li><a class="tocitem" href="execution_control/">Execution Control</a></li><li><a class="tocitem" href="wavefront_ops/">Wavefront Operations</a></li></ul></li><li><a class="tocitem" href="printing/">Printing</a></li><li><a class="tocitem" href="logging/">Logging</a></li><li><a class="tocitem" href="api/">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaGPU/AMDGPU.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Programming-AMD-GPUs-with-Julia"><a class="docs-heading-anchor" href="#Programming-AMD-GPUs-with-Julia">Programming AMD GPUs with Julia</a><a id="Programming-AMD-GPUs-with-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#Programming-AMD-GPUs-with-Julia" title="Permalink"></a></h1><h2 id="The-Julia-AMDGPU-stack"><a class="docs-heading-anchor" href="#The-Julia-AMDGPU-stack">The Julia AMDGPU stack</a><a id="The-Julia-AMDGPU-stack-1"></a><a class="docs-heading-anchor-permalink" href="#The-Julia-AMDGPU-stack" title="Permalink"></a></h2><p>Julia support for programming AMD GPUs is currently provided by the <a href="https://github.com/JuliaGPU/AMDGPU.jl">AMDGPU.jl</a> package. This package contains everything necessary to program for AMD GPUs in Julia, including:</p><ul><li>An interface for compiling and running kernels written in Julia through LLVM&#39;s AMDGPU backend.</li><li>An interface for working with the HIP runtime API,   necessary for launching compiled kernels and controlling the GPU.</li><li>An array type implementing the <a href="https://github.com/JuliaGPU/GPUArrays.jl">GPUArrays.jl</a>   interface, providing high-level array operations.</li></ul><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>Simply add the AMDGPU.jl package to your Julia environment:</p><pre><code class="language-julia hljs">using Pkg
Pkg.add(&quot;AMDGPU&quot;)</code></pre><p>To ensure that everything works, you can run the test suite:</p><pre><code class="language-julia hljs">using AMDGPU
using Pkg
Pkg.test(&quot;AMDGPU&quot;)</code></pre><h2 id="Required-Software"><a class="docs-heading-anchor" href="#Required-Software">Required Software</a><a id="Required-Software-1"></a><a class="docs-heading-anchor-permalink" href="#Required-Software" title="Permalink"></a></h2><p>For optimal experience, you should have full ROCm stack installed. Refer to official ROCm stack installation instructions: <a href="https://rocm.docs.amd.com/en/latest/deploy/linux/index.html">https://rocm.docs.amd.com/en/latest/deploy/linux/index.html</a></p><p>Currently, AMDGPU.jl utilizes following libraries:</p><p><a href="https://github.com/RadeonOpenCompute/ROCT-Thunk-Interface">ROCT</a>, <a href="https://github.com/RadeonOpenCompute/ROCR-Runtime">ROCR</a>, <a href="https://github.com/RadeonOpenCompute/ROCm-Device-Libs">ROCm-Device-Libs</a>, <a href="https://github.com/ROCm-Developer-Tools/HIP">HIP</a>, <a href="https://github.com/ROCmSoftwarePlatform/rocBLAS">rocBLAS</a>, <a href="https://github.com/ROCmSoftwarePlatform/rocFFT">rocFFT</a>, <a href="https://github.com/ROCmSoftwarePlatform/rocSOLVER">rocSOLVER</a>, <a href="https://github.com/ROCmSoftwarePlatform/rocSPARSE">rocSPARSE</a>, <a href="https://github.com/ROCmSoftwarePlatform/rocRAND">rocRAND</a>, <a href="https://github.com/ROCmSoftwarePlatform/MIOpen">MIOpen</a>.</p><p>Other ROCm packages are currently unused by AMDGPU.</p><h3 id="ROCm-artifacts"><a class="docs-heading-anchor" href="#ROCm-artifacts">ROCm artifacts</a><a id="ROCm-artifacts-1"></a><a class="docs-heading-anchor-permalink" href="#ROCm-artifacts" title="Permalink"></a></h3><p>Currently AMDGPU.jl does not provide ROCm artifacts. One needs to build a newer version of them. See #440 issue: <a href="https://github.com/JuliaGPU/AMDGPU.jl/issues/440">https://github.com/JuliaGPU/AMDGPU.jl/issues/440</a>.</p><h3 id="LLVM-compatibility"><a class="docs-heading-anchor" href="#LLVM-compatibility">LLVM compatibility</a><a id="LLVM-compatibility-1"></a><a class="docs-heading-anchor-permalink" href="#LLVM-compatibility" title="Permalink"></a></h3><p>As a rule of thumb, Julia&#39;s LLVM version should match ROCm LLVM&#39;s version. For example, Julia 1.9 relies on LLVM 14, so the matching ROCm version is <code>5.2.x</code> (although <code>5.4</code> is confirmed to work as well).</p><h3 id="Extra-Setup-Details"><a class="docs-heading-anchor" href="#Extra-Setup-Details">Extra Setup Details</a><a id="Extra-Setup-Details-1"></a><a class="docs-heading-anchor-permalink" href="#Extra-Setup-Details" title="Permalink"></a></h3><p>List of additional steps that may be needed to take to ensure everything is working:</p><ul><li><p>Make sure your user is in the same group as <code>/dev/kfd</code>, other than <code>root</code>.</p><p>For example, it might be the <code>render</code> group:</p><p><code>crw-rw----   1 root   render  234,   0 Aug  5 11:43 kfd</code></p><p>In this case, you can add yourself to it:</p><p><code>sudo usermod -aG render username</code></p></li><li><p>ROCm libraries should be in the standard library locations, or in your <code>LD_LIBRARY_PATH</code>.</p></li><li><p>If you get an error message along the lines of <code>GLIB_CXX_... not found</code>,   it&#39;s possible that the C++ runtime used to build the ROCm stack   and the one used by Julia are different.   If you built the ROCm stack yourself this is very likely the case   since Julia normally ships with its own C++ runtime.</p><p>For more information, check out this <a href="https://github.com/JuliaLang/julia/issues/34276">GitHub issue</a>.   A quick fix is to use the <code>LD_PRELOAD</code> environment variable to make Julia use the system C++ runtime library, for example:</p><p><code>LD_PRELOAD=/usr/lib/libstdc++.so julia</code></p><p>Alternatively, you can build Julia from source as described   <a href="https://github.com/JuliaLang/julia/blob/master/doc/build/build.md">here</a>.   To quickly debug this issue start Julia and try to load a ROCm library:</p><p><code>using Libdl   Libdl.dlopen(&quot;/opt/rocm/hsa/lib/libhsa-runtime64.so.1&quot;)</code></p></li><li><p><code>ld.lld</code> should be in your <code>PATH</code>.</p></li><li><p>For better experience use whatever Linux kernel   is officially supported by ROCm stack.</p></li></ul><p>Once all of this is setup properly, you should be able to do <code>using AMDGPU</code> successfully.</p><p>See the <a href="quickstart/#Quick-Start">Quick Start</a> documentation for an introduction to using AMDGPU.jl.</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="quickstart/">Quick Start »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Saturday 2 September 2023 21:12">Saturday 2 September 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
