<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · AMDGPU.jl</title><meta name="title" content="Home · AMDGPU.jl"/><meta property="og:title" content="Home · AMDGPU.jl"/><meta property="twitter:title" content="Home · AMDGPU.jl"/><meta name="description" content="Documentation for AMDGPU.jl."/><meta property="og:description" content="Documentation for AMDGPU.jl."/><meta property="twitter:description" content="Documentation for AMDGPU.jl."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href><img src="assets/logo.png" alt="AMDGPU.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href>AMDGPU.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Requirements"><span>Requirements</span></a></li><li><a class="tocitem" href="#Windows-OS-missing-functionality"><span>Windows OS missing functionality</span></a></li><li><a class="tocitem" href="#ROCm-system-libraries"><span>ROCm system libraries</span></a></li><li><a class="tocitem" href="#ROCm-artifacts"><span>ROCm artifacts</span></a></li><li><a class="tocitem" href="#Extra-Setup-Details"><span>Extra Setup Details</span></a></li><li><a class="tocitem" href="#Preferences"><span>Preferences</span></a></li></ul></li><li><a class="tocitem" href="quickstart/">Quick Start</a></li><li><a class="tocitem" href="devices/">Devices</a></li><li><a class="tocitem" href="streams/">Streams</a></li><li><a class="tocitem" href="kernel_launch/">Kernel Launch</a></li><li><a class="tocitem" href="exceptions/">Exceptions</a></li><li><a class="tocitem" href="profiling/">Profiling</a></li><li><a class="tocitem" href="memory/">Memory</a></li><li><a class="tocitem" href="hostcall/">Host-Call</a></li><li><span class="tocitem">Intrinsics</span><ul><li><a class="tocitem" href="execution_control/">Execution Control</a></li></ul></li><li><a class="tocitem" href="printing/">Printing</a></li><li><a class="tocitem" href="logging/">Logging</a></li><li><a class="tocitem" href="api/">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaGPU/AMDGPU.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaGPU/AMDGPU.jl/blob/master/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Programming-AMD-GPUs-with-Julia"><a class="docs-heading-anchor" href="#Programming-AMD-GPUs-with-Julia">Programming AMD GPUs with Julia</a><a id="Programming-AMD-GPUs-with-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#Programming-AMD-GPUs-with-Julia" title="Permalink"></a></h1><p>Julia support for programming AMD GPUs is currently provided by the <a href="https://github.com/JuliaGPU/AMDGPU.jl">AMDGPU.jl</a> package. This package contains everything necessary to program for AMD GPUs in Julia, including:</p><ul><li>An interface for compiling and running kernels written in Julia through LLVM&#39;s AMDGPU backend.</li><li>An interface for working with the HIP runtime API,   necessary for launching compiled kernels and controlling the GPU.</li><li>An array type implementing the <a href="https://github.com/JuliaGPU/GPUArrays.jl">GPUArrays.jl</a>   interface, providing high-level array operations.</li></ul><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>Simply add the AMDGPU.jl package to your Julia environment:</p><pre><code class="language-julia hljs">using Pkg
Pkg.add(&quot;AMDGPU&quot;)</code></pre><p>To ensure that everything works, you can run the test suite:</p><pre><code class="language-julia hljs">using AMDGPU
using Pkg
Pkg.test(&quot;AMDGPU&quot;)</code></pre><h2 id="Requirements"><a class="docs-heading-anchor" href="#Requirements">Requirements</a><a id="Requirements-1"></a><a class="docs-heading-anchor-permalink" href="#Requirements" title="Permalink"></a></h2><ul><li>Julia <strong>1.9 or higher</strong> (Navi 3 requires Julia 1.10+).</li><li><strong>64-bit</strong> Linux or Windows.</li><li>Minimal supported ROCm version is <strong>5.3</strong>.</li><li>Required software:</li></ul><table><tr><th style="text-align: center">Linux</th><th style="text-align: center">Windows</th></tr><tr><td style="text-align: center"><a href="https://rocm.docs.amd.com/en/latest/deploy/linux/quick_start.html">ROCm</a></td><td style="text-align: center"><a href="https://rocm.docs.amd.com/en/latest/deploy/windows/quick_start.html">ROCm</a></td></tr><tr><td style="text-align: center">-</td><td style="text-align: center"><a href="https://www.amd.com/en/technologies/software">AMD Software: Adrenalin Edition</a></td></tr></table><p>On Windows AMD Software: Adrenalin Edition contains HIP library itself, while ROCm provides support for other functionality.</p><h2 id="Windows-OS-missing-functionality"><a class="docs-heading-anchor" href="#Windows-OS-missing-functionality">Windows OS missing functionality</a><a id="Windows-OS-missing-functionality-1"></a><a class="docs-heading-anchor-permalink" href="#Windows-OS-missing-functionality" title="Permalink"></a></h2><p>Windows <strong>does not</strong> yet support <a href="hostcall/#Hostcall">Hostcall</a>, which means that some of the functionality does not work, like:</p><ul><li>device printing;</li><li>dynamic memory allocation (from kernels).</li></ul><p>These hostcalls are sometimes launched when AMDGPU detects that a kernel might throw an exception, specifically during conversions, like: <code>Int32(1f0)</code>.</p><p>To avoid this, use &#39;unsafe&#39; conversion option: <code>unsafe_trunc(Int32, 1f0)</code>.</p><h2 id="ROCm-system-libraries"><a class="docs-heading-anchor" href="#ROCm-system-libraries">ROCm system libraries</a><a id="ROCm-system-libraries-1"></a><a class="docs-heading-anchor-permalink" href="#ROCm-system-libraries" title="Permalink"></a></h2><p>AMDGPU.jl looks into standard directories and uses <code>Libdl.find_library</code> to find ROCm libraries.</p><p>Standard path:</p><ul><li>Linux: <code>/opt/rocm</code></li><li>Windows: <code>C:/Program Files/AMD/ROCm/&lt;rocm-version&gt;</code></li></ul><p>If you have non-standard path for ROCm, set <code>ROCM_PATH=&lt;path&gt;</code> environment variable before launching Julia.</p><h2 id="ROCm-artifacts"><a class="docs-heading-anchor" href="#ROCm-artifacts">ROCm artifacts</a><a id="ROCm-artifacts-1"></a><a class="docs-heading-anchor-permalink" href="#ROCm-artifacts" title="Permalink"></a></h2><p>There is limited support for ROCm 5.4+ artifacts which can be enabled with <a href="#AMDGPU.ROCmDiscovery.use_artifacts!"><code>AMDGPU.use_artifacts!</code></a>.</p><p>Limited means not all libraries are available and some of the functionality may be disabled.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AMDGPU.ROCmDiscovery.use_artifacts!" href="#AMDGPU.ROCmDiscovery.use_artifacts!"><code>AMDGPU.ROCmDiscovery.use_artifacts!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">use_artifacts!(flag::Bool = true)</code></pre><p>Pass <code>true</code> to switch from system-wide ROCm installtion to artifacts. When using artifacts, system-wide installation is not needed at all.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGPU/AMDGPU.jl/blob/c3f724c00189c1e725a333294d743397f5c65a9e/src/discovery/discovery.jl#L9-L14">source</a></section></article><h2 id="Extra-Setup-Details"><a class="docs-heading-anchor" href="#Extra-Setup-Details">Extra Setup Details</a><a id="Extra-Setup-Details-1"></a><a class="docs-heading-anchor-permalink" href="#Extra-Setup-Details" title="Permalink"></a></h2><p>List of additional steps that may be needed to take to ensure everything is working:</p><ul><li><p>Make sure your user is in the same group as <code>/dev/kfd</code>, other than <code>root</code>.</p><p>For example, it might be the <code>render</code> group:</p><p><code>crw-rw----   1 root   render  234,   0 Aug  5 11:43 kfd</code></p><p>In this case, you can add yourself to it:</p><p><code>sudo usermod -aG render username</code></p></li><li><p>ROCm libraries should be in the standard library locations, or in your <code>LD_LIBRARY_PATH</code>.</p></li><li><p>If you get an error message along the lines of <code>GLIB_CXX_... not found</code>,   it&#39;s possible that the C++ runtime used to build the ROCm stack   and the one used by Julia are different.   If you built the ROCm stack yourself this is very likely the case   since Julia normally ships with its own C++ runtime.</p><p>For more information, check out this <a href="https://github.com/JuliaLang/julia/issues/34276">GitHub issue</a>.   A quick fix is to use the <code>LD_PRELOAD</code> environment variable to make Julia use the system C++ runtime library, for example:</p><p><code>LD_PRELOAD=/usr/lib/libstdc++.so julia</code></p><p>Alternatively, you can build Julia from source as described   <a href="https://github.com/JuliaLang/julia/blob/master/doc/build/build.md">here</a>.   To quickly debug this issue start Julia and try to load a ROCm library:</p><p><code>using Libdl   Libdl.dlopen(&quot;/opt/rocm/hsa/lib/libhsa-runtime64.so.1&quot;)</code></p></li></ul><p>Once all of this is setup properly, you should be able to do <code>using AMDGPU</code> successfully.</p><p>See the <a href="quickstart/#Quick-Start">Quick Start</a> documentation for an introduction to using AMDGPU.jl.</p><h2 id="Preferences"><a class="docs-heading-anchor" href="#Preferences">Preferences</a><a id="Preferences-1"></a><a class="docs-heading-anchor-permalink" href="#Preferences" title="Permalink"></a></h2><p>AMDGPU.jl supports setting <a href="https://github.com/JuliaPackaging/Preferences.jl">preferences</a>. Template of <code>LocalPreferences.toml</code> with all options:</p><pre><code class="language-toml hljs">[AMDGPU]
# If `true` then use ROCm libraries provided by artifacts.
# However, not all ROCm libraries are available as artifacts.
use_artifacts = false
# Use non-blocking synchronization for all `AMDGPU.synchronize()` calls.
nonblocking_synchronization = true
# Memory limit specifies maximum amount of memory in percentages
# a current Julia process can use.
# Default is &quot;none&quot;, which does not apply any limitation.
hard_memory_limit = &quot;none&quot;
# Notice a space between the value and percentage sign.
# hard_memory_limit = &quot;80 %&quot;</code></pre></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="quickstart/">Quick Start »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.0 on <span class="colophon-date" title="Friday 1 December 2023 08:23">Friday 1 December 2023</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
