<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Performance Tips | AMDGPU.jl</title>
    <meta name="description" content="Documentation for AMDGPU.jl">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/dev/assets/style.Dw0RGVJ8.css" as="style">
    <link rel="preload stylesheet" href="/dev/vp-icons.css" as="style">
    
    <script type="module" src="/dev/assets/app.CZ1V34Uc.js"></script>
    <link rel="preload" href="/dev/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/dev/assets/chunks/theme.DLLafhQp.js">
    <link rel="modulepreload" href="/dev/assets/chunks/framework.DvWL5WFy.js">
    <link rel="modulepreload" href="/dev/assets/tutorials_perf.md.q0FAttBT.lean.js">
    <link rel="icon" href="/dev/favicon.ico">
    <script src="/dev/versions.js"></script>
    <script src="/dev/siteinfo.js"></script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-a9a9e638><!--[--><!--]--><!--[--><span tabindex="-1" data-v-492508fc></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-492508fc>Skip to content</a><!--]--><!----><header class="VPNav" data-v-a9a9e638 data-v-f1e365da><div class="VPNavBar" data-v-f1e365da data-v-822684d1><div class="wrapper" data-v-822684d1><div class="container" data-v-822684d1><div class="title" data-v-822684d1><div class="VPNavBarTitle has-sidebar" data-v-822684d1 data-v-0f4f798b><a class="title" href="/dev/" data-v-0f4f798b><!--[--><!--]--><!--[--><img class="VPImage logo" src="/dev/logo.png" width="24" height="24" alt data-v-35a7d0b8><!--]--><span data-v-0f4f798b>AMDGPU.jl</span><!--[--><!--]--></a></div></div><div class="content" data-v-822684d1><div class="content-body" data-v-822684d1><!--[--><!--]--><div class="VPNavBarSearch search" data-v-822684d1><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-822684d1 data-v-e6d46098><span id="main-nav-aria-label" class="visually-hidden" data-v-e6d46098> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/dev/index" tabindex="0" data-v-e6d46098 data-v-956ec74c><!--[--><span data-v-956ec74c>Home</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-e6d46098 data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-04f5c5e9><span class="text" data-v-04f5c5e9><!----><span data-v-04f5c5e9>Tutorials</span><span class="vpi-chevron-down text-icon" data-v-04f5c5e9></span></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><div class="items" data-v-7dd3104a><!--[--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/dev/tutorials/quickstart" data-v-acbfed09><!--[--><span data-v-acbfed09>Quick Start</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link active" href="/dev/tutorials/perf" data-v-acbfed09><!--[--><span data-v-acbfed09>Performance Tips</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/dev/tutorials/profiling" data-v-acbfed09><!--[--><span data-v-acbfed09>Profiling</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/dev/install_tips" data-v-acbfed09><!--[--><span data-v-acbfed09>Installation Tips</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-e6d46098 data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-04f5c5e9><span class="text" data-v-04f5c5e9><!----><span data-v-04f5c5e9>API</span><span class="vpi-chevron-down text-icon" data-v-04f5c5e9></span></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><div class="items" data-v-7dd3104a><!--[--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/dev/api/devices" data-v-acbfed09><!--[--><span data-v-acbfed09>Devices</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/dev/api/streams" data-v-acbfed09><!--[--><span data-v-acbfed09>Streams</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/dev/api/kernel_programming" data-v-acbfed09><!--[--><span data-v-acbfed09>Kernel Programming</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/dev/api/exceptions" data-v-acbfed09><!--[--><span data-v-acbfed09>Exceptions</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/dev/api/memory" data-v-acbfed09><!--[--><span data-v-acbfed09>Memory</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/dev/api/hostcall" data-v-acbfed09><!--[--><span data-v-acbfed09>Host-Call</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/dev/api/printing" data-v-acbfed09><!--[--><span data-v-acbfed09>Printing</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/dev/api/intrinsics" data-v-acbfed09><!--[--><span data-v-acbfed09>Intrinsics</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><!----><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-822684d1 data-v-af096f4a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-af096f4a data-v-e40a8bb6 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-e40a8bb6></span><span class="vpi-moon moon" data-v-e40a8bb6></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-822684d1 data-v-164c457f data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/JuliaGPU/AMDGPU.jl" aria-label="github" target="_blank" rel="noopener" data-v-ee7a9424 data-v-d26d30cb><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-822684d1 data-v-925effce data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-04f5c5e9><span class="vpi-more-horizontal icon" data-v-04f5c5e9></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><!----><!--[--><!--[--><!----><div class="group" data-v-925effce><div class="item appearance" data-v-925effce><p class="label" data-v-925effce>Appearance</p><div class="appearance-action" data-v-925effce><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-925effce data-v-e40a8bb6 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-e40a8bb6></span><span class="vpi-moon moon" data-v-e40a8bb6></span><!--]--></span></span></button></div></div></div><div class="group" data-v-925effce><div class="item social-links" data-v-925effce><div class="VPSocialLinks social-links-list" data-v-925effce data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/JuliaGPU/AMDGPU.jl" aria-label="github" target="_blank" rel="noopener" data-v-ee7a9424 data-v-d26d30cb><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-822684d1 data-v-5dea55bf><span class="container" data-v-5dea55bf><span class="top" data-v-5dea55bf></span><span class="middle" data-v-5dea55bf></span><span class="bottom" data-v-5dea55bf></span></span></button></div></div></div></div><div class="divider" data-v-822684d1><div class="divider-line" data-v-822684d1></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-a9a9e638 data-v-070ab83d><div class="container" data-v-070ab83d><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-070ab83d><span class="vpi-align-left menu-icon" data-v-070ab83d></span><span class="menu-text" data-v-070ab83d>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-070ab83d data-v-168ddf5d><button data-v-168ddf5d>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-a9a9e638 data-v-18756405><div class="curtain" data-v-18756405></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-18756405><span class="visually-hidden" id="sidebar-aria-label" data-v-18756405> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0" data-v-9e426adc data-v-a4b0d9bf><!----><div class="items" data-v-a4b0d9bf><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/dev/index" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Home</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0 collapsible has-active" data-v-9e426adc data-v-a4b0d9bf><div class="item" role="button" tabindex="0" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><h2 class="text" data-v-a4b0d9bf>Tutorials</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a4b0d9bf><span class="vpi-chevron-right caret-icon" data-v-a4b0d9bf></span></div></div><div class="items" data-v-a4b0d9bf><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/dev/tutorials/quickstart" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Quick Start</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/dev/tutorials/perf" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Performance Tips</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/dev/tutorials/profiling" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Profiling</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/dev/install_tips" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Installation Tips</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0 collapsible" data-v-9e426adc data-v-a4b0d9bf><div class="item" role="button" tabindex="0" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><h2 class="text" data-v-a4b0d9bf>API</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a4b0d9bf><span class="vpi-chevron-right caret-icon" data-v-a4b0d9bf></span></div></div><div class="items" data-v-a4b0d9bf><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/dev/api/devices" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Devices</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/dev/api/streams" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Streams</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/dev/api/kernel_programming" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Kernel Programming</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/dev/api/exceptions" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Exceptions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/dev/api/memory" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Memory</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/dev/api/hostcall" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Host-Call</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/dev/api/printing" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Printing</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/dev/api/intrinsics" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Intrinsics</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-a9a9e638 data-v-91765379><div class="VPDoc has-sidebar has-aside" data-v-91765379 data-v-83890dd9><!--[--><!--]--><div class="container" data-v-83890dd9><div class="aside" data-v-83890dd9><div class="aside-curtain" data-v-83890dd9></div><div class="aside-container" data-v-83890dd9><div class="aside-content" data-v-83890dd9><div class="VPDocAside" data-v-83890dd9 data-v-6d7b3c46><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-6d7b3c46 data-v-b38bf2ff><div class="content" data-v-b38bf2ff><div class="outline-marker" data-v-b38bf2ff></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-b38bf2ff>On this page</div><ul class="VPDocOutlineItem root" data-v-b38bf2ff data-v-3f927ebe><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-6d7b3c46></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-83890dd9><div class="content-container" data-v-83890dd9><!--[--><!--]--><main class="main" data-v-83890dd9><div style="position:relative;" class="vp-doc _dev_tutorials_perf" data-v-83890dd9><div><h1 id="Performance-Tips" tabindex="-1">Performance Tips <a class="header-anchor" href="#Performance-Tips" aria-label="Permalink to &quot;Performance Tips {#Performance-Tips}&quot;">​</a></h1><h2 id="Use-Caching-Memory-Allocator" tabindex="-1">Use Caching Memory Allocator <a class="header-anchor" href="#Use-Caching-Memory-Allocator" aria-label="Permalink to &quot;Use Caching Memory Allocator {#Use-Caching-Memory-Allocator}&quot;">​</a></h2><p>Julia relies on Garbage-Collection (GC) for memory management, because of that it will not free <code>ROCArrays</code> immediately as they are no longer used.</p><p>In tight loops with lots of GPU allocations this will put a lot of pressure on the allocator and may interfere with other programs that use that GPU.</p><p>Using <a href="https://juliagpu.github.io/GPUArrays.jl/dev/interface/#Caching-Allocator" target="_blank" rel="noreferrer">caching allocator</a> gives users a precise control of GPU memory, even if the allocations happen in code that&#39;s not controlled by the user.</p><p>You should use <code>GPUArrays.@cached</code> around parts of the code with repeating memory allocation patterns, for example, on the training loops.</p><p>Example below requires <code>8 MiB</code> of VRAM per iteration. In the worst case (if GC does not kick in) it would quickly fill up to <code>8 GiB</code> of VRAM, but with caching allocator it uses exactly <code>8 MiB</code>, which you can then immediately free to reclaim the memory.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cache </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GPUArrays</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AllocCache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AllocCache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(n_free</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, n_busy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sizeof</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bytes)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           GPUArrays</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@cached</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cache </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">               sin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.(AMDGPU</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Float32, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cache</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AllocCache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(n_free</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, n_busy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sizeof</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8.000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MiB)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GPUArrays</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">unsafe_free!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cache)</span></span></code></pre></div><p>For a more sophisticated real-world example, see how <a href="https://github.com/JuliaNeuralGraphics/GaussianSplatting.jl/blob/e4ef1324c187371e336bef875b053023afe7fb2c/src/training.jl#L183" target="_blank" rel="noreferrer">GaussianSplatting.jl</a> handles it.</p><h2 id="Using-SIMD" tabindex="-1">Using SIMD <a class="header-anchor" href="#Using-SIMD" aria-label="Permalink to &quot;Using SIMD {#Using-SIMD}&quot;">​</a></h2><p>Using vectorized load/store instructions can improve performance of the kernel. Let&#39;s see on a simple vector addition example how to use it.</p><p>We define two helper functions:</p><ul><li><p><code>vload</code> that will load SIMD tile given a pointer into the array;</p></li><li><p><code>vstore!</code> that will write SIMD tile into an array given its pointer.</p></li></ul><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AMDGPU, SIMD</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@inline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> vload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Type{SIMD.Vec{N, T}}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ptr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Core.LLVMPtr{T, AS}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {N, T, AS}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    alignment </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sizeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(T) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> N</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    vec_ptr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Base</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bitcast</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Core</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LLVMPtr{SIMD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Vec{N, T}, AS}, ptr)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> unsafe_load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vec_ptr, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(alignment))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@inline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> vstore!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ptr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Core.LLVMPtr{T, AS}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SIMD.Vec{N, T}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {N, T, AS}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    alignment </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sizeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(T) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> N</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    vec_ptr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Base</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bitcast</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Core</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LLVMPtr{SIMD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Vec{N, T}, AS}, ptr)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    unsafe_store!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vec_ptr, x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(alignment))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> vadd_simd!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractVector{T}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, a, b, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Val{tile_size}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {T, tile_size}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> workitemIdx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">workgroupIdx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> workgroupDim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tile_idx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tile_size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    a_ptr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pointer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a, tile_idx)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    b_ptr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pointer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(b, tile_idx)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    c_ptr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pointer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c, tile_idx)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    a_tile </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> vload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(SIMD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Vec{tile_size, T}, a_ptr)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    b_tile </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> vload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(SIMD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Vec{tile_size, T}, b_ptr)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    vstore!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c_ptr, a_tile </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b_tile)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1024</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tile_size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ROCArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ones</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Int, n))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ROCArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ones</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Int, n))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ROCArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">zeros</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Int, n))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">groupsize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 256</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gridsize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> cld</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">÷</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tile_size, groupsize)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@roc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> groupsize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">groupsize gridsize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gridsize </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">vadd_simd!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c, a, b, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tile_size))</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b)</span></span></code></pre></div><p>Examining LLVM IR, we can see vectorized <code>load &lt;4 x i64&gt;</code>, <code>add &lt;4 x i64&gt;</code> and <code>store &lt;4 x i64&gt;</code> instructions:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AMDGPU</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@device_code_llvm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> @roc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> launch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> vadd_simd!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c, a, b, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tile_size));</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">; GPUCompiler.CompilerJob{GPUCompiler.GCNCompilerTarget, AMDGPU.Compiler.HIPCompilerParams}(MethodInstance for Main.var&quot;Main&quot;.vadd_simd!(::AMDGPU.Device.ROCDeviceVector{Int64, 1}, ::AMDGPU.Device.ROCDeviceVector{Int64, 1}, ::AMDGPU.Device.ROCDeviceVector{Int64, 1}, ::Val{4}), CompilerConfig for GPUCompiler.GCNCompilerTarget, 0x0000000000007ba5)</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:73 within `vadd_simd!`</span></span>
<span class="line"><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">define</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> amdgpu_kernel</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> void</span><span style="--shiki-light:#b08800;--shiki-dark:#ffea7f;"> @_Z10vadd_simd_14ROCDeviceArrayI5Int64Li1ELi1EES1_S1_3ValILi4EE</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">[</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">5</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">]</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %state</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">{</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> [</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">]</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> }</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %0</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">{</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> [</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">]</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> }</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %1</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">{</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> [</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">]</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> }</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %2</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> local_unnamed_addr</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> #1 </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">{</span></span>
<span class="line"><span style="--shiki-light:#cb2431;--shiki-dark:#f97583;">conversion:</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">  %.fca.1.extract11 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">extractvalue</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> {</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> [</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">]</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> }</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %0</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">  %.fca.1.extract5 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">extractvalue</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> {</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> [</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">]</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> }</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %1</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">  %.fca.1.extract </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">extractvalue</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> {</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> [</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">]</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> }</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %2</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:74 within `vadd_simd!`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/GyXG6/src/device/gcn/indexing.jl:122 within `workitemIdx`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/GyXG6/src/device/gcn/indexing.jl:87 within `workitemIdx_x`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/GyXG6/src/device/gcn/indexing.jl:3 within `_index`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/GyXG6/src/device/gcn/indexing.jl:3 within `macro expansion` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/base.jl:39</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %3 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">call</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i32</span><span style="--shiki-light:#b08800;--shiki-dark:#ffea7f;"> @llvm.amdgcn.workitem.id.x</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ int.jl:1074 within `+` @ int.jl:87</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">     %4 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">add</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> nuw</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> nsw</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i32</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %3</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/GyXG6/src/device/gcn/indexing.jl:130 within `workgroupIdx`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/GyXG6/src/device/gcn/indexing.jl:93 within `workgroupIdx_x`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/GyXG6/src/device/gcn/indexing.jl:3 within `_index`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/GyXG6/src/device/gcn/indexing.jl:3 within `macro expansion` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/base.jl:39</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %5 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">call</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i32</span><span style="--shiki-light:#b08800;--shiki-dark:#ffea7f;"> @llvm.amdgcn.workgroup.id.x</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ int.jl:1074 within `-` @ int.jl:86</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">   %6 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">zext</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i32</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %5 </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">to</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i64</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/GyXG6/src/device/gcn/indexing.jl:138 within `workgroupDim`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/GyXG6/src/device/gcn/indexing.jl:101 within `workgroupDim_x`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/GyXG6/src/device/gcn/indexing.jl:32 within `_dim`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/GyXG6/src/device/gcn/indexing.jl:32 within `macro expansion` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/base.jl:39</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %7 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">call</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#b08800;--shiki-dark:#ffea7f;">@llvm.amdgcn.dispatch.ptr</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %8 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">getelementptr</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> inbounds</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i8</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%7</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> 4</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %9 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">bitcast</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%8 </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">to</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i16</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %10 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">load</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i16</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i16</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%9</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">align</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> 4</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ int.jl:1072 within `*`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ int.jl:557 within `rem`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ number.jl:7 within `convert`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ boot.jl:784 within `Int64`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││││┌ @ boot.jl:708 within `toInt64`</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">       %11 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">zext</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i16</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %10 </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">to</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i64</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │└└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │ @ int.jl:1074 within `*` @ int.jl:88</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">   %12 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">mul</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> nuw</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> nsw</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i64</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %11</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%6</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ int.jl:1072 within `+`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ int.jl:557 within `rem`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ number.jl:7 within `convert`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ boot.jl:784 within `Int64`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││││┌ @ boot.jl:708 within `toInt64`</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">       %13 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">zext</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i32</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %4 </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">to</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i64</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │└└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │ @ int.jl:1074 within `+` @ int.jl:87</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">   %14 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">add</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> nuw</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> nsw</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i64</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %12</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%13</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:75 within `vadd_simd!`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ int.jl:88 within `*`</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">   %15 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">shl</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> nuw</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> nsw</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i64</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %14</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">5</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:77 within `vadd_simd!`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/GyXG6/src/device/gcn/array.jl:61 within `pointer`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ abstractarray.jl:1243 within `_memory_offset`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ int.jl:88 within `*`</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">     %16 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">add</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> nsw</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i64</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %15</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">-32</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/pointer.jl:147 within `+`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/pointer.jl:114 within `add_ptr`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/pointer.jl:114 within `macro expansion` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/base.jl:39</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %17 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">getelementptr</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i8</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%.fca.1.extract5</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %16</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:78 within `vadd_simd!`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/GyXG6/src/device/gcn/array.jl:61 within `pointer`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/pointer.jl:147 within `+`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/pointer.jl:114 within `add_ptr`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/pointer.jl:114 within `macro expansion` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/base.jl:39</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %18 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">getelementptr</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i8</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%.fca.1.extract</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %16</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:79 within `vadd_simd!`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/GyXG6/src/device/gcn/array.jl:61 within `pointer`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/pointer.jl:147 within `+`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/pointer.jl:114 within `add_ptr`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/pointer.jl:114 within `macro expansion` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/base.jl:39</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %19 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">getelementptr</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i8</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%.fca.1.extract11</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %16</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:81 within `vadd_simd!`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ perf.md:63 within `vload`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/pointer.jl:85 within `unsafe_load`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ none within `pointerref`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ none within `macro expansion` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/base.jl:39</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %20 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">bitcast</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%17 </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">to</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> &lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %.unpack </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">load</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> &lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%20</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">align</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> 32</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:82 within `vadd_simd!`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ perf.md:63 within `vload`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/pointer.jl:85 within `unsafe_load`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ none within `pointerref`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ none within `macro expansion` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/base.jl:39</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %21 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">bitcast</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%18 </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">to</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> &lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %.unpack16 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">load</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> &lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%21</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">align</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> 32</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:83 within `vadd_simd!`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/SIMD/UiGbs/src/simdvec.jl:264 within `+`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/SIMD/UiGbs/src/LLVM_intrinsics.jl:242 within `add` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/SIMD/UiGbs/src/LLVM_intrinsics.jl:242</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/SIMD/UiGbs/src/LLVM_intrinsics.jl:250 within `macro expansion`</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">     %22 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">add</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> &lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %.unpack16</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%.unpack</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ perf.md:69 within `vstore!`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/pointer.jl:88 within `unsafe_store!`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ none within `pointerset`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ none within `macro expansion` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/iza6e/src/interop/base.jl:39</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %23 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">bitcast</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%19 </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">to</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> &lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span></span>
<span class="line"><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">      store</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> &lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %22</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%23</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">align</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> 32</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:84 within `vadd_simd!`</span></span>
<span class="line"><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">  ret</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> void</span></span>
<span class="line"><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">}</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-83890dd9 data-v-4f9813fa><!--[--><!--]--><div class="edit-info" data-v-4f9813fa><div class="edit-link" data-v-4f9813fa><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://https://github.com/JuliaGPU/AMDGPU.jl/edit/master/docs/src/tutorials/perf.md" target="_blank" rel="noreferrer" data-v-4f9813fa><!--[--><span class="vpi-square-pen edit-link-icon" data-v-4f9813fa></span> Edit this page<!--]--></a></div><!----></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-4f9813fa><span class="visually-hidden" id="doc-footer-aria-label" data-v-4f9813fa>Pager</span><div class="pager" data-v-4f9813fa><a class="VPLink link pager-link prev" href="/dev/tutorials/quickstart" data-v-4f9813fa><!--[--><span class="desc" data-v-4f9813fa>Previous page</span><span class="title" data-v-4f9813fa>Quick Start</span><!--]--></a></div><div class="pager" data-v-4f9813fa><a class="VPLink link pager-link next" href="/dev/tutorials/profiling" data-v-4f9813fa><!--[--><span class="desc" data-v-4f9813fa>Next page</span><span class="title" data-v-4f9813fa>Profiling</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-a9a9e638 data-v-c970a860><div class="container" data-v-c970a860><p class="message" data-v-c970a860>Made with <a href="https://luxdl.github.io/DocumenterVitepress.jl/dev/" target="_blank"><strong>DocumenterVitepress.jl</strong></a><br></p><p class="copyright" data-v-c970a860>© Copyright 2025.</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api_devices.md\":\"Lngnckth\",\"api_exceptions.md\":\"DKDoROvT\",\"api_hostcall.md\":\"Dmyp1lAF\",\"api_intrinsics.md\":\"DvhXSGi4\",\"api_kernel_programming.md\":\"DpBWWaaC\",\"api_memory.md\":\"C_Lkp6dj\",\"api_printing.md\":\"B4jpGfUI\",\"api_streams.md\":\"BMZQ8ouX\",\"index.md\":\"DwJznL8y\",\"install_tips.md\":\"DOwl5cG3\",\"tutorials_perf.md\":\"q0FAttBT\",\"tutorials_profiling.md\":\"ChZAAOwl\",\"tutorials_quickstart.md\":\"knen8l8r\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"AMDGPU.jl\",\"description\":\"Documentation for AMDGPU.jl\",\"base\":\"/dev/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"outline\":\"deep\",\"logo\":{\"src\":\"/logo.png\",\"width\":24,\"height\":24},\"search\":{\"provider\":\"local\",\"options\":{\"detailedView\":true}},\"nav\":[{\"text\":\"Home\",\"link\":\"/index\"},{\"text\":\"Tutorials\",\"collapsed\":false,\"items\":[{\"text\":\"Quick Start\",\"link\":\"/tutorials/quickstart\"},{\"text\":\"Performance Tips\",\"link\":\"/tutorials/perf\"},{\"text\":\"Profiling\",\"link\":\"/tutorials/profiling\"},{\"text\":\"Installation Tips\",\"link\":\"/install_tips\"}]},{\"text\":\"API\",\"collapsed\":false,\"items\":[{\"text\":\"Devices\",\"link\":\"/api/devices\"},{\"text\":\"Streams\",\"link\":\"/api/streams\"},{\"text\":\"Kernel Programming\",\"link\":\"/api/kernel_programming\"},{\"text\":\"Exceptions\",\"link\":\"/api/exceptions\"},{\"text\":\"Memory\",\"link\":\"/api/memory\"},{\"text\":\"Host-Call\",\"link\":\"/api/hostcall\"},{\"text\":\"Printing\",\"link\":\"/api/printing\"},{\"text\":\"Intrinsics\",\"link\":\"/api/intrinsics\"}]},{\"component\":\"VersionPicker\"}],\"sidebar\":[{\"text\":\"Home\",\"link\":\"/index\"},{\"text\":\"Tutorials\",\"collapsed\":false,\"items\":[{\"text\":\"Quick Start\",\"link\":\"/tutorials/quickstart\"},{\"text\":\"Performance Tips\",\"link\":\"/tutorials/perf\"},{\"text\":\"Profiling\",\"link\":\"/tutorials/profiling\"},{\"text\":\"Installation Tips\",\"link\":\"/install_tips\"}]},{\"text\":\"API\",\"collapsed\":false,\"items\":[{\"text\":\"Devices\",\"link\":\"/api/devices\"},{\"text\":\"Streams\",\"link\":\"/api/streams\"},{\"text\":\"Kernel Programming\",\"link\":\"/api/kernel_programming\"},{\"text\":\"Exceptions\",\"link\":\"/api/exceptions\"},{\"text\":\"Memory\",\"link\":\"/api/memory\"},{\"text\":\"Host-Call\",\"link\":\"/api/hostcall\"},{\"text\":\"Printing\",\"link\":\"/api/printing\"},{\"text\":\"Intrinsics\",\"link\":\"/api/intrinsics\"}]}],\"editLink\":{\"pattern\":\"https://https://github.com/JuliaGPU/AMDGPU.jl/edit/master/docs/src/:path\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/JuliaGPU/AMDGPU.jl\"}],\"footer\":{\"message\":\"Made with <a href=\\\"https://luxdl.github.io/DocumenterVitepress.jl/dev/\\\" target=\\\"_blank\\\"><strong>DocumenterVitepress.jl</strong></a><br>\",\"copyright\":\"© Copyright 2025.\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>