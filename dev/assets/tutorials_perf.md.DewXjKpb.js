import{_ as i,c as a,o as n,aj as h}from"./chunks/framework.DwKaRznA.js";const c=JSON.parse('{"title":"Performance Tips","description":"","frontmatter":{},"headers":[],"relativePath":"tutorials/perf.md","filePath":"tutorials/perf.md","lastUpdated":null}'),e={name:"tutorials/perf.md"};function k(l,s,t,p,d,r){return n(),a("div",null,[...s[0]||(s[0]=[h(`<h1 id="Performance-Tips" tabindex="-1">Performance Tips <a class="header-anchor" href="#Performance-Tips" aria-label="Permalink to &quot;Performance Tips {#Performance-Tips}&quot;">​</a></h1><h2 id="Use-Caching-Memory-Allocator" tabindex="-1">Use Caching Memory Allocator <a class="header-anchor" href="#Use-Caching-Memory-Allocator" aria-label="Permalink to &quot;Use Caching Memory Allocator {#Use-Caching-Memory-Allocator}&quot;">​</a></h2><p>Julia relies on Garbage-Collection (GC) for memory management, because of that it will not free <code>ROCArrays</code> immediately as they are no longer used.</p><p>In tight loops with lots of GPU allocations this will put a lot of pressure on the allocator and may interfere with other programs that use that GPU.</p><p>Using <a href="https://juliagpu.github.io/GPUArrays.jl/dev/interface/#Caching-Allocator" target="_blank" rel="noreferrer">caching allocator</a> gives users a precise control of GPU memory, even if the allocations happen in code that&#39;s not controlled by the user.</p><p>You should use <code>GPUArrays.@cached</code> around parts of the code with repeating memory allocation patterns, for example, on the training loops.</p><p>Example below requires <code>8 MiB</code> of VRAM per iteration. In the worst case (if GC does not kick in) it would quickly fill up to <code>8 GiB</code> of VRAM, but with caching allocator it uses exactly <code>8 MiB</code>, which you can then immediately free to reclaim the memory.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cache </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GPUArrays</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AllocCache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AllocCache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(n_free</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, n_busy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sizeof</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bytes)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           GPUArrays</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@cached</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cache </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">               sin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.(AMDGPU</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Float32, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cache</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AllocCache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(n_free</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, n_busy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sizeof</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8.000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MiB)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GPUArrays</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">unsafe_free!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cache)</span></span></code></pre></div><p>For a more sophisticated real-world example, see how <a href="https://github.com/JuliaNeuralGraphics/GaussianSplatting.jl/blob/e4ef1324c187371e336bef875b053023afe7fb2c/src/training.jl#L183" target="_blank" rel="noreferrer">GaussianSplatting.jl</a> handles it.</p><h2 id="Using-SIMD" tabindex="-1">Using SIMD <a class="header-anchor" href="#Using-SIMD" aria-label="Permalink to &quot;Using SIMD {#Using-SIMD}&quot;">​</a></h2><p>Using vectorized load/store instructions can improve performance of the kernel. Let&#39;s see on a simple vector addition example how to use it.</p><p>We define two helper functions:</p><ul><li><p><code>vload</code> that will load SIMD tile given a pointer into the array;</p></li><li><p><code>vstore!</code> that will write SIMD tile into an array given its pointer.</p></li></ul><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AMDGPU, SIMD</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@inline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> vload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Type{SIMD.Vec{N, T}}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ptr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Core.LLVMPtr{T, AS}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {N, T, AS}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    alignment </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sizeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(T) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> N</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    vec_ptr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Base</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bitcast</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Core</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LLVMPtr{SIMD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Vec{N, T}, AS}, ptr)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> unsafe_load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vec_ptr, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(alignment))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@inline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> vstore!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ptr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Core.LLVMPtr{T, AS}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SIMD.Vec{N, T}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {N, T, AS}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    alignment </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sizeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(T) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> N</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    vec_ptr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Base</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bitcast</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Core</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LLVMPtr{SIMD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Vec{N, T}, AS}, ptr)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    unsafe_store!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vec_ptr, x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(alignment))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> vadd_simd!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractVector{T}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, a, b, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Val{tile_size}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {T, tile_size}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> workitemIdx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">workgroupIdx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> workgroupDim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tile_idx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tile_size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    a_ptr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pointer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a, tile_idx)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    b_ptr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pointer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(b, tile_idx)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    c_ptr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pointer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c, tile_idx)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    a_tile </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> vload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(SIMD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Vec{tile_size, T}, a_ptr)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    b_tile </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> vload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(SIMD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Vec{tile_size, T}, b_ptr)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    vstore!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c_ptr, a_tile </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b_tile)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1024</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tile_size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ROCArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ones</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Int, n))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ROCArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ones</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Int, n))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ROCArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">zeros</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Int, n))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">groupsize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 256</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gridsize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> cld</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">÷</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tile_size, groupsize)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@roc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> groupsize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">groupsize gridsize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gridsize </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">vadd_simd!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c, a, b, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tile_size))</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b)</span></span></code></pre></div><p>Examining LLVM IR, we can see vectorized <code>load &lt;4 x i64&gt;</code>, <code>add &lt;4 x i64&gt;</code> and <code>store &lt;4 x i64&gt;</code> instructions:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AMDGPU</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@device_code_llvm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> @roc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> launch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> vadd_simd!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c, a, b, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tile_size));</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">; GPUCompiler.CompilerJob{GPUCompiler.GCNCompilerTarget, AMDGPU.Compiler.HIPCompilerParams}(MethodInstance for Main.var&quot;Main&quot;.vadd_simd!(::AMDGPU.Device.ROCDeviceVector{Int64, 1}, ::AMDGPU.Device.ROCDeviceVector{Int64, 1}, ::AMDGPU.Device.ROCDeviceVector{Int64, 1}, ::Val{4}), CompilerConfig for GPUCompiler.GCNCompilerTarget, 0x0000000000007ba3)</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:73 within \`vadd_simd!\`</span></span>
<span class="line"><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">define</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> amdgpu_kernel</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> void</span><span style="--shiki-light:#b08800;--shiki-dark:#ffea7f;"> @_Z10vadd_simd_14ROCDeviceArrayI5Int64Li1ELi1EES1_S1_3ValILi4EE</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">[</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">5</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">]</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %state</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">{</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> [</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">]</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> }</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %0</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">{</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> [</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">]</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> }</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %1</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">{</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> [</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">]</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> }</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %2</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> local_unnamed_addr</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> #1 </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">{</span></span>
<span class="line"><span style="--shiki-light:#cb2431;--shiki-dark:#f97583;">conversion:</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">  %.fca.1.extract11 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">extractvalue</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> {</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> [</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">]</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> }</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %0</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">  %.fca.1.extract5 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">extractvalue</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> {</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> [</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">]</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> }</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %1</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">  %.fca.1.extract </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">extractvalue</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> {</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> [</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">]</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> }</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %2</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:74 within \`vadd_simd!\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/uq1zh/src/device/gcn/indexing.jl:122 within \`workitemIdx\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/uq1zh/src/device/gcn/indexing.jl:87 within \`workitemIdx_x\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/uq1zh/src/device/gcn/indexing.jl:3 within \`_index\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/uq1zh/src/device/gcn/indexing.jl:3 within \`macro expansion\` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/base.jl:39</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %3 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">call</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i32</span><span style="--shiki-light:#b08800;--shiki-dark:#ffea7f;"> @llvm.amdgcn.workitem.id.x</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ int.jl:1074 within \`+\` @ int.jl:87</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">     %4 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">add</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> nuw</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> nsw</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i32</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %3</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/uq1zh/src/device/gcn/indexing.jl:130 within \`workgroupIdx\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/uq1zh/src/device/gcn/indexing.jl:93 within \`workgroupIdx_x\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/uq1zh/src/device/gcn/indexing.jl:3 within \`_index\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/uq1zh/src/device/gcn/indexing.jl:3 within \`macro expansion\` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/base.jl:39</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %5 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">call</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i32</span><span style="--shiki-light:#b08800;--shiki-dark:#ffea7f;"> @llvm.amdgcn.workgroup.id.x</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ int.jl:1074 within \`-\` @ int.jl:86</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">   %6 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">zext</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i32</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %5 </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">to</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i64</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/uq1zh/src/device/gcn/indexing.jl:138 within \`workgroupDim\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/uq1zh/src/device/gcn/indexing.jl:101 within \`workgroupDim_x\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/uq1zh/src/device/gcn/indexing.jl:32 within \`_dim\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/uq1zh/src/device/gcn/indexing.jl:32 within \`macro expansion\` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/base.jl:39</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %7 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">call</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#b08800;--shiki-dark:#ffea7f;">@llvm.amdgcn.dispatch.ptr</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %8 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">getelementptr</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> inbounds</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i8</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%7</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> 4</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %9 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">bitcast</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%8 </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">to</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i16</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %10 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">load</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i16</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i16</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%9</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">align</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> 4</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ int.jl:1072 within \`*\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ int.jl:557 within \`rem\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ number.jl:7 within \`convert\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ boot.jl:784 within \`Int64\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││││┌ @ boot.jl:708 within \`toInt64\`</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">       %11 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">zext</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i16</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %10 </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">to</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i64</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │└└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │ @ int.jl:1074 within \`*\` @ int.jl:88</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">   %12 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">mul</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> nuw</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> nsw</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i64</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %11</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%6</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ int.jl:1072 within \`+\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ int.jl:557 within \`rem\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ number.jl:7 within \`convert\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ boot.jl:784 within \`Int64\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││││┌ @ boot.jl:708 within \`toInt64\`</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">       %13 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">zext</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i32</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %4 </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">to</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i64</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │└└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │ @ int.jl:1074 within \`+\` @ int.jl:87</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">   %14 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">add</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> nuw</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> nsw</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i64</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %12</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%13</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:75 within \`vadd_simd!\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ int.jl:88 within \`*\`</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">   %15 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">shl</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> nuw</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> nsw</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i64</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %14</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">5</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:77 within \`vadd_simd!\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/uq1zh/src/device/gcn/array.jl:61 within \`pointer\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ abstractarray.jl:1243 within \`_memory_offset\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ int.jl:88 within \`*\`</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">     %16 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">add</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> nsw</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i64</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %15</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">-32</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/pointer.jl:147 within \`+\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/pointer.jl:114 within \`add_ptr\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/pointer.jl:114 within \`macro expansion\` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/base.jl:39</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %17 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">getelementptr</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i8</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%.fca.1.extract5</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %16</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:78 within \`vadd_simd!\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/uq1zh/src/device/gcn/array.jl:61 within \`pointer\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/pointer.jl:147 within \`+\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/pointer.jl:114 within \`add_ptr\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/pointer.jl:114 within \`macro expansion\` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/base.jl:39</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %18 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">getelementptr</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i8</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%.fca.1.extract</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %16</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:79 within \`vadd_simd!\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/AMDGPU/uq1zh/src/device/gcn/array.jl:61 within \`pointer\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/pointer.jl:147 within \`+\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/pointer.jl:114 within \`add_ptr\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/pointer.jl:114 within \`macro expansion\` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/base.jl:39</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %19 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">getelementptr</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i8</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%.fca.1.extract11</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %16</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:81 within \`vadd_simd!\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ perf.md:63 within \`vload\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/pointer.jl:85 within \`unsafe_load\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ none within \`pointerref\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ none within \`macro expansion\` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/base.jl:39</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %20 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">bitcast</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%17 </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">to</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> &lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %.unpack </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">load</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> &lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%20</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">align</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> 32</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:82 within \`vadd_simd!\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ perf.md:63 within \`vload\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/pointer.jl:85 within \`unsafe_load\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ none within \`pointerref\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ none within \`macro expansion\` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/base.jl:39</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %21 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">bitcast</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%18 </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">to</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> &lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %.unpack16 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">load</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> &lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%21</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">align</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> 32</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:83 within \`vadd_simd!\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/SIMD/hyXY3/src/simdvec.jl:262 within \`+\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/SIMD/hyXY3/src/LLVM_intrinsics.jl:235 within \`add\` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/SIMD/hyXY3/src/LLVM_intrinsics.jl:235</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/SIMD/hyXY3/src/LLVM_intrinsics.jl:243 within \`macro expansion\`</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">     %22 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">add</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> &lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %.unpack16</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%.unpack</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ┌ @ perf.md:69 within \`vstore!\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │┌ @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/pointer.jl:88 within \`unsafe_store!\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; ││┌ @ none within \`pointerset\`</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; │││┌ @ none within \`macro expansion\` @ /root/.cache/julia-buildkite-plugin/depots/687d1932-34cc-406b-8aac-ab7952bcde26/packages/LLVM/UFrs4/src/interop/base.jl:39</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">      %23 </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">= </span><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">bitcast</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> i8</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%19 </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">to</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> &lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">*</span></span>
<span class="line"><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">      store</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> &lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> %22</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&lt;</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">4</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;"> x </span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;">i64</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">&gt;</span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;"> addrspace</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">(</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">1</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">)</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">* </span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">%23</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">, </span><span style="--shiki-light:#5a32a3;--shiki-dark:#b392f0;">align</span><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;"> 32</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">; └└└└</span></span>
<span class="line"><span style="--shiki-light:#959da5;--shiki-dark:#959da5;">;  @ perf.md:84 within \`vadd_simd!\`</span></span>
<span class="line"><span style="--shiki-light:#3192aa;--shiki-light-font-weight:bold;--shiki-dark:#56d4dd;--shiki-dark-font-weight:bold;">  ret</span><span style="--shiki-light:#1b7c83;--shiki-dark:#39c5cf;"> void</span></span>
<span class="line"><span style="--shiki-light:#dbab09;--shiki-dark:#ffea7f;">}</span></span></code></pre></div>`,17)])])}const y=i(e,[["render",k]]);export{c as __pageData,y as default};
